define(["exports"],function(a){"use strict";function b(a){var b=document.cookie.indexOf(a+"="),c=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return"";if(-1==b)return"";var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),decodeURI(document.cookie.substring(c,d))}function c(a,b,d){this.maxSize_=a||-1,this.debug_=b||!1,this.storage_=d||new c.BasicCacheStorage,this.fillFactor_=.75,this.stats_={},this.stats_.hits=0,this.stats_.misses=0,this.log_("Initialized cache with size "+a)}function d(){}function e(a){l=[a]}function f(a,b,c){return a&&a.apply(b.context||b,c)}function g(a){return/\?/.test(a)?"&":"?"}function h(a){function b(b){W++||(X(),R&&(G[T]={s:[b]}),N&&(b=N.apply(a,[b])),f(t,a,[b,B,a]),f(M,a,[a,B]))}function c(b){W++||(X(),R&&b!=C&&(G[T]=b),f(L,a,[a,b]),f(M,a,[a,b]))}a=$.extend({},I,a);var h,i,j,k,m,t=a.success,L=a.error,M=a.complete,N=a.dataFilter,O=a.callbackParameter,P=a.callback,Q=a.cache,R=a.pageCache,S=a.charset,T=a.url,U=a.data,V=a.timeout,W=0,X=d;return E&&E(function(a){a.done(t).fail(L),t=a.resolve,L=a.reject}).promise(a),a.abort=function(){!W++&&X()},f(a.beforeSend,a,[a])===!1||W?a:(T=T||p,U=U?"string"==typeof U?U:$.param(U,a.traditional):p,T+=U?g(T)+U:p,O&&(T+=g(T)+encodeURIComponent(O)+"=?"),!Q&&!R&&(T+=g(T)+"_"+(new Date).getTime()+"="),T=T.replace(/=\?(&|$)/,"="+P+"$1"),R&&(h=G[T])?h.s?b(h.s[0]):c(h):(D[P]=e,j=$(A)[0],j.id=s+H++,S&&(j[o]=S),J&&J.version()<11.6?(k=$(A)[0]).text="document.getElementById('"+j.id+"')."+v+"()":j[n]=n,K&&(j.htmlFor=j.id,j.event=u),j[w]=j[v]=j[x]=function(a){if(!j[y]||!/i/.test(j[y])){try{j[u]&&j[u]()}catch(d){}a=l,l=0,a?b(a[0]):c(q)}},j.src=T,X=function(a){m&&clearTimeout(m),j[x]=j[w]=j[v]=null,F[z](j),k&&F[z](k)},F[r](j,i=F.firstChild),k&&F[r](k,i),m=V>0&&setTimeout(function(){c(C)},V)),a)}function i(){$(document).on("click.suggestor",function(a){var b=$(a.target).closest(".suggest");N[b.attr("id")]&&b.is(".suggest")||$.each(N,function(a,b){var c=$(this).attr("id").split("_")[1],d=$(this).parent().find(".sugInp"),e=d.val();e&&d.val(e.replace(/,\s*$/,"")),$(this).removeClass("slideDown"),delete N[c]})})}c.Priority={LOW:1,NORMAL:2,HIGH:4},c.BasicCacheStorage=function(){this.items_={},this.count_=0},c.BasicCacheStorage.prototype.get=function(a){return this.items_[a]},c.BasicCacheStorage.prototype.set=function(a,b){"undefined"==typeof this.get(a)&&this.count_++,this.items_[a]=b},c.BasicCacheStorage.prototype.size=function(a,b){return this.count_},c.BasicCacheStorage.prototype.remove=function(a){var b=this.get(a);return"undefined"!=typeof b&&this.count_--,delete this.items_[a],b},c.BasicCacheStorage.prototype.keys=function(){var a,b=[];for(a in this.items_)b.push(a);return b},c.LocalStorageCacheStorage=function(a){this.prefix_="cache-storage."+(a||"default")+".";var b=this.prefix_.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");this.regexp_=new RegExp("^"+b)},c.LocalStorageCacheStorage.prototype.get=function(a){var b=window.localStorage[this.prefix_+a];return b?JSON.parse(b):null},c.LocalStorageCacheStorage.prototype.set=function(a,b){window.localStorage[this.prefix_+a]=JSON.stringify(b)},c.LocalStorageCacheStorage.prototype.size=function(a,b){return this.keys().length},c.LocalStorageCacheStorage.prototype.remove=function(a){var b=this.get(a);return delete window.localStorage[this.prefix_+a],b},c.LocalStorageCacheStorage.prototype.keys=function(){var a,b=[];for(a in window.localStorage)a.match(this.regexp_)&&b.push(a.replace(this.prefix_,""));return b},c.prototype.getItem=function(a){var b=this.storage_.get(a);null!=b&&(this.isExpired_(b)?(this.removeItem(a),b=null):b.lastAccessed=(new Date).getTime());var c=b?b.value:null;return c?(this.stats_.hits++,this.log_("Cache HIT for key "+a)):(this.stats_.misses++,this.log_("Cache MISS for key "+a)),c},c._CacheItem=function(a,b,d){if(!a)throw new Error("key cannot be null or empty");this.key=a,this.value=b,d=d||{},d.expirationAbsolute&&(d.expirationAbsolute=d.expirationAbsolute.getTime()),d.priority||(d.priority=c.Priority.NORMAL),this.options=d,this.lastAccessed=(new Date).getTime()},c.prototype.setItem=function(a,b,d){if(null!=this.storage_.get(a)&&this.removeItem(a),this.addItem_(new c._CacheItem(a,b,d)),this.log_("Setting key "+a),this.maxSize_>0&&this.size()>this.maxSize_){var e=this;setTimeout(function(){e.purge_.call(e)},0)}},c.prototype.clear=function(){for(var a=this.storage_.keys(),b=0;b<a.length;b++)this.removeItem(a[b]);this.log_("Cache cleared")},c.prototype.getStats=function(){return this.stats_},c.prototype.toHtmlString=function(){for(var a=this.size()+" item(s) in cache<br /><ul>",b=this.storage_.keys(),c=0;c<b.length;c++){var d=this.storage_.get(b[c]);a=a+"<li>"+d.key.toString()+" = "+d.value.toString()+"</li>"}return a+="</ul>"},c.prototype.resize=function(a){this.log_("Resizing Cache from "+this.maxSize_+" to "+a);var b=this.maxSize_;this.maxSize_=a,a>0&&(0>b||b>a)&&this.size()>a&&this.purge_(),this.log_("Resizing done")},c.prototype.purge_=function(){var a=new Array,b=Math.round(this.maxSize_*this.fillFactor_);this.maxSize_<0&&(b=this.size()*this.fillFactor_);for(var c=this.storage_.keys(),d=0;d<c.length;d++){var e=c[d],f=this.storage_.get(e);this.isExpired_(f)?this.removeItem(e):a.push(f)}if(a.length>b)for(a=a.sort(function(a,b){return a.options.priority!=b.options.priority?b.options.priority-a.options.priority:b.lastAccessed-a.lastAccessed});a.length>b;){var g=a.pop();this.removeItem(g.key)}this.log_("Purged cached")},c.prototype.addItem_=function(a,b){try{this.storage_.set(a.key,a)}catch(c){if(b)throw this.log_("Failed setting again, giving up: "+c.toString()),c;this.log_("Error adding item, purging and trying again: "+c.toString()),this.purge_(),this.addItem_(a,!0)}},c.prototype.removeItem=function(a){var b=this.storage_.remove(a);return this.log_("removed key "+a),b&&b.options&&b.options.callback&&setTimeout(function(){b.options.callback.call(null,b.key,b.value)},0),b?b.value:null},c.prototype.removeWhere=function(a){for(var b=this.storage_.keys(),c=0;c<b.length;c++){var d=b[c],e=this.storage_.get(d);a(d,e.value)===!0&&this.removeItem(d)}},c.prototype.size=function(){return this.storage_.size()},c.prototype.isExpired_=function(a){var b=(new Date).getTime(),c=!1;if(a.options.expirationAbsolute&&a.options.expirationAbsolute<b&&(c=!0),!c&&a.options.expirationSliding){var d=a.lastAccessed+1e3*a.options.expirationSliding;b>d&&(c=!0)}return c},c.prototype.log_=function(a){this.debug_};var j=window;"undefined"!=typeof module&&module.exports?module.exports=c:"function"==typeof define&&define.amd?define("ncCache",function(){return c}):j.Cache=c,c.UserDataCacheStorage=function(a){var a=a,b=document.createElement("div");b.style.display="none",document.getElementsByTagName("head")[0].appendChild(b),b.addBehavior("#default#userdata"),this.get=function(c){b.load(a);var d=b.getAttribute(c);return d?$.parseJSON(d):null},this.set=function(c,d){b.load(a),b.setAttribute(c,$.stringify(d)),b.save(a)},this.size=function(a,c){return b.XMLDocument.documentElement.attributes.length},this.remove=function(c){b.load(a),b.removeAttribute(c),b.save(a)},this.keys=function(){b.load(a);for(var c,d=-1,e=[];c=b.XMLDocument.documentElement.attributes[++d];)e.push(c.name);return e}};var l,m={getCache:function(a,b){if("undefined"==typeof a||parseInt(a)<=0)throw new"Invalid app id: "+a;b=b||"localStorage";var d=window.navigator.userAgent.match(/MSIE 7/),e=null;if("localStorage"==b&&(d?e=new c.UserDataCacheStorage(String(a)):"undefined"!=typeof window.localStorage&&(e=new c.LocalStorageCacheStorage(String(a)))),null==e)throw"Unsupported storage type: "+b;return new c(-1,!1,e)}},n="async",o="charset",p="",q="error",r="insertBefore",s="_jqjsp",t="on",u=t+"click",v=t+q,w=t+"load",x=t+"readystatechange",y="readyState",z="removeChild",A="<script>",B="success",C="timeout",D=window,E=$.Deferred,F=$("head")[0]||document.documentElement,G={},H=0,I={callback:s,url:location.href},J=D.opera,K=!!$("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;h.setup=function(a){$.extend(I,a)},$.jsonp=h;var L,M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},N={},O={},P=m.getCache("sgtr"),Q=function(){return"undefined"!=typeof Storage?!0:!1},R=function(a,b){var c=JSON.stringify(b);navigator.sendBeacon&&a?navigator.sendBeacon(a,c):Q()&&P.setItem("sug_Tracking",b)},S=function(a,b,c,d,e,f){var g;return g="autoconcepts"==d?{type:"ac",acFor:c,sel:a,pos:b,cached:e}:"relatedConcept"==d?{type:"rc",rcFor:f,sel:a,pos:b,cached:e}:{sel:a,pos:b}},T=function(a,b,c,d,e,f,g){O[a]&&O[a].Events.push(S(b,c,d,e,f,g))},U=function(){$(".sugInp").each(function(a,b){var c,d=$(this),e=d.attr("trackParams"),f=d.val();e=e?$.parseJSON(e):null,e&&(f||O[e.id]&&O[e.id].Events.length?(O[e.id].Events.length||T(e.id,f,0),e.sourceId&&(O[e.id].sId=e.sourceId),e.appId&&(O[e.id].appId=e.appId),e.platform&&(O[e.id].platform=e.platform),e.formId&&(O[e.id].formId=e.formId),e.trackingSrc&&(O[e.id].trackingSrc=e.trackingSrc),c=d.attr("vertical"),c&&(O.vertical=c)):O[e.id]&&!O[e.id].Events.length&&delete O[e.id])}),$.isEmptyObject(O)||R(L,{lgData:O})};window.onunload=function(){U()};var V=function(a){if(!(a.domain||a.url.autoComplete&&a.url.relatedConcept&&a.url.checkVersion&&a.url.prefetch))throw Error("One or more mandatory parameters are missing, please refer documentation. https://github.com/saeed3e/suggestjs/blob/gh-pages/README.md");var c={id:null,url:{autoComplete:a.domain+"/suggest/autosuggest?",relatedConcept:a.domain+"/suggest/autoconcepts?",checkVersion:a.domain+"/suggest/v?",prefetch:a.domain+"/suggest/prefetch?"},relatedConcept_dataLayer:!0,autoCorrect_dataLayer:!0,maxSuggestions:15,maxHeight:300,multiSearch:!1,startSearchAfter:1,suggestOnClick:!1,whiteListSpecialChar:[],relatedCorrectionText:"Did you mean ?",relatedConceptText:"Related Skills",glbArray:!1,placeholder:!1,trackUserInteraction:!1,grouping:!0,isPrefetch:!0,source:a.data?"local":"server",category:{},categoryOrder:[],qParams:{},searchLimit:{},relatedConceptCategory:null,getRelatedConcepts:null,onSelect:!1,scrollStyle:"",width:null,preventClose:!1,returnFocus:!0,form:!1,showDataOnFocus:!1,storageKey:{prefetchKey:"__suggest_prefetch",versionKey:"__suggest_versions"},userCookie:null,titleForSingleBucket:"Last Searched Keywords",appId:null,relatedConceptsLimit:1/0,defaultPrefetchLookup:!0,toolTip:!1,powerComments:!1,appendCommaAtLast_onSelect:!0,vertical:"",removeCommaAtLast_onBlur:!0};for(var d in a.category)"object"===M(a.category[d])?(c.category[d]=c.category[d]||a.category[d].title,c.searchLimit[d]=c.searchLimit[d]||a.category[d],c.categoryOrder.push(d)):c.category[d]=a.category[d]||c.categoryOrder;a.categoryOrder=a.category.order||c.categoryOrder,a.category=c.category,a.searchLimit=c.searchLimit;var e=$.extend(!0,{},c,a);e.storageKey.userCookie=e.storageKey.userCookie||e.userCookie,e.preventClose||i();var f=function(a,b,c){if(a){var d=this,f=d.id;$.jsonp({url:a+"&callback=suggestCallback",cache:!0,callback:"suggestCallback",beforeSend:function(){c||$("#"+f+" .nLoder").show()},success:function(a){d.cached=!1,a.resultList?$.isEmptyObject(a.resultList)&&d.dropCont.hasClass("slideDown")?K.call(d):(d.dataType="autoconcepts",b(a),e.vertical=a.vertical,d.inpElm.attr("vertical",e.vertical)):a.resultConcepts?($.isEmptyObject(a.resultConcepts)?K.call(d):(d.dataType="relatedConcept",e.getRelatedConcepts&&e.getRelatedConcepts(a,d.Qry),e.relatedConcept_dataLayer?b(a):K.call(d)),d.RCMaxCntr++):a.resultCorrections?($.isEmptyObject(a.resultCorrections)?K.call(d):(d.dataType="relatedConcept",e.getAutoCorrect&&e.getAutoCorrect(a,d.Qry),e.autoCorrect_dataLayer&&b(a)),d.RCMaxCntr++):b(a)},complete:function(){d.node.find(".nLoder").hide()},error:function(a,b){d.node.find(".nLoder").hide(),K.call(d)}})}},g=function(){var a=this;a.rs_kWrds=[],a.rs_kWrdsStr="";var c=e.showDataOnFocus;c&&(a.rs_kWrds=c,a.rs_kWrds.length&&(a.rs_kWrdsStr=a.rs_kWrds.join(",").replace(/\s,|,\s/g,",")));var d=e.storageKey;a.isLoggedIn=d.userCookie?b(d.userCookie):!1;var f=e.vertical?"&vertical="+e.vertical:"",g=G();return a.isLoggedIn?{key:d.prefetchKey+"/uId/"+a.isLoggedIn,url:e.url.prefetch+"&"+Math.random(1,100)+"&keywords="+a.rs_kWrdsStr+"&uid="+a.isLoggedIn+f+g,keywords:a.rs_kWrdsStr}:a.rs_kWrdsStr?{key:d.prefetchKey,url:e.url.prefetch+"&"+Math.random(1,100)+"&keywords="+a.rs_kWrdsStr+f+g,keywords:a.rs_kWrdsStr}:{key:d.prefetchKey,url:e.url.prefetch+"&"+Math.random(1,100)+"&keywords="+f+g,keywords:a.rs_kWrdsStr}},h=function(a,b){if(e.vertical=b.vertical,e.vertical){var c=b.ac,d=b.rc,f=e.category,g=e.relatedConceptCategory;for(key in c)for(k in c[key])if(f[k]){var h=k+"_"+e.vertical;c[key][h]=c[key][k],delete c[key][k]}else delete c[key][k];for(key in d)for(k in d[key])if(g[k]){var h=k+"_"+e.vertical;d[key][h]=d[key][k],delete d[key][k]}else delete d[key][k];var i=$.extend(!0,{},a.ac,c),j=$.extend(!0,{},a.rc,d)}else var i=$.extend(!0,{},a.ac,b.ac),j=$.extend(!0,{},a.rc,b.rc);return{ac:i,rc:j,ttl:b.ttl,segments:b.segments,keyword_based_data:b.keyword_based_data}},j=function(){var a=this;e.url.checkVersion+=Math.random(0,100),a.prefetchObj=g.call(a),!window.isFistCall&&e.url.prefetch&&Q()&&e.isPrefetch&&(f.call(a,e.url.checkVersion,function(b){p(e.storageKey.versionKey,b);var c=P.getItem(a.prefetchObj.key);if(c)(a.prefetchObj.keywords&&c.keyword_based_data===!1||+new Date(c.ttl)-+new Date<0)&&f.call(a,a.prefetchObj.url+"&segments="+c.segments,function(b){p(a.prefetchObj.key,h(c,b))});else{var d=P.getItem(e.storageKey.prefetchKey),g=d?d.segments:"";f.call(a,a.prefetchObj.url+"&segments="+g,function(b){p(a.prefetchObj.key,b)},!0)}},!0),window.isFistCall=!0)},l=function(a,b){var c=b,d=b;if(a.setSelectionRange)a.focus(),a.setSelectionRange(c,d);else if(a.createTextRange){var e=a.createTextRange();e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select()}},m=function(a){return a?a.replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&"):""},n=function(a){return a=$.trim(a).toLowerCase(),a=$.trim(a.substring(a.lastIndexOf(",")+1,a.length))},o=function(a){var b=$.trim(a).replace(/,*$/g,"");return $.trim(b.substring(b.lastIndexOf(",")+1,b.length)).toLowerCase()},p=function(a,b){P.setItem(a,b)},q=function(a,b){if(this.prefetchObj){var c=P.getItem(this.prefetchObj.key);return!e.defaultPrefetchLookup||c&&c[b]&&c[b][a]||(c=P.getItem(e.storageKey.prefetchKey)),c?c[b][a]:!1}return!1},r=function(){var a=this,b=a.inpElm.val();b&&a.inpElm.val(b.replace(/,\s*$/,""))},s=function(a){var b=this,c=b.inpElm.val(),d=c.substring(0,c.lastIndexOf(",")+1);return d=d?d+" ":"",a=$.trim(m(a).replace(/,*$/g,"")),e.multiSearch?d+a+", ":a},t=function(a,b){return $.inArray(a[0],b.find("li.sugTouple"))+1},u=function(a,b){var c=this,d=c.id,f=c.inpElm,g=a.text(),h=function(){return e.localSuggestions?function(a){var b=c.trimSpace(a),d=b.match(/\W(\w)*$/g);if(d){var f=d[0].charAt(0);return e.localSuggestions.removeRepetedDelimiter&&(b=b.replace(new RegExp(f+"+$","g"),f)),b.substring(0,b.lastIndexOf(f)+1)+g+" "}return g}(f.val()):s.call(c,g)}();c.enableRC_for_onfocus=!1,h.length<e.maxlength?(f.val(h),e.trackUserInteraction&&T(d,n(h.replace(/[,\s]*$/,"")),c.posIndex,n(c.queryChar),c.dataType,c.cached,c.Qry),e.returnFocus&&l(f[0],f.val().length),b&&c.get_RCdata(f.val()),e.onSelect&&e.onSelect(d,m(g),f,c)):e.onSelect&&e.onSelect(d,"Warning: maximum length reached",f,c),K.call(c)},v=function(a){var b=this,c=b.dropCont.find(a);return c=c.hasClass("category")?c.next():c},w=function(a){a&&a.find(".sAct").removeClass("sAct")},x=function(a,b){var c=this,d=a;return a="prev"==b?a.prev().hasClass("category")?a.prev().prev().length?a.prev().prev():v.call(c," li:last-child"):a.prev().length?a.prev():v.call(c," li:last-child"):a.next().length?a.next().hasClass("category")?a.next().next():a.next():v.call(c," li:first-child"),c.curElm.find(".Sarw").hasClass("sAct")?a.find(".Sarw").addClass("sAct"):a.find(".Sbtn").addClass("sAct"),w(d),e.multiSearch||c.inpElm.val(m(a.find(".Sbtn").html())),a},y=function(a,b){var c=this;return b=$("#"+a),b=b.hasClass("category")?b.next():b,b.find(".Sbtn").addClass("sAct"),e.multiSearch||c.inpElm.val(m(b.find(".Sbtn").html())),b},z=function(a,b){var c,d=this;c="object"==("undefined"==typeof a?"undefined":M(a))?a.displayTextEn:a;var f="",g="",h="",i="";c=c.replace(/&amp;/gi,"&"),b.split(",")[1]&&e.multiSearch&&(b=d.getlastChar(b)),b=b.replace(/[\s]+/g," ").replace(/^\s/,"").toLowerCase();var j=c,k=j.toLowerCase(),l=k.indexOf(b),m=k,n=b,o=m.indexOf(" "+n)<0?!1:m.indexOf(" "+n),p=m.indexOf("("+n)<0?!1:m.indexOf("("+n),q=m.indexOf("/"+n)<0?!1:m.indexOf("/"+n);(l>=0&&(o||p||q)||0===l)&&(l&&(o?l=o+1:p?l=p+1:q&&(l=q+1)),g=j.substr(0,l),h=j.substr(l,b.length),i="<strong>"+j.substr(l+b.length,j.length)+"</strong>"),h=h?h:c;var r;r=b?g+h+i:h;var s=e.toolTip?g+h+new3:"",t=e.suggestOnClick?'<div class="wrapTable"><div tabindex="-1" class="Sbtn" title="'+s+'">'+g+h+i+'</div></div><span class="Sarw"></span>':'<div tabindex="-1" class="Sbtn" title="'+s+'" style="width:100%">'+r+"</div>";return f='<li class="sugTouple">'+t+"</li>"},A=function(a,b){var c={},d=0,f="";for(var g in b)e.vertical&&(f=g+"_"+e.vertical),(a[f]||a[g])&&(c[g]=a[f]||a[g],d++);return[c,d]},B=function(a,b,c,d){var f,g=this,h="";d||(d="resultConcepts"==c?e.relatedConceptCategory:e.category),f=!c&&e.showTitleForSingleBucket?A(b,{rs:"rs"}):A(b,d);var i=f[1];b=f[0];var j="",k="";if(a=a.replace(/&amp;/gi,"&"),$.isEmptyObject(e.searchLimit))for(var l in b){var m=0;for(var n in b[l])if(c||m++<e.maxSuggestions){if(k=g.inpElm.val().replace(/\s,/g,",").replace(/,\s/g,",").toLowerCase(),-1!=k.indexOf(",")&&-1!=$.inArray(b[l][n].displayTextEn.toLowerCase(),k.split(",")))continue;j+=z.call(g,b[l][n],a)}j&&i>1?h+=e.grouping?'<li class="category '+l+'">'+(e.category[l]?e.category[l]:l)+"</li>"+j:j:!c&&e.showTitleForSingleBucket?h+='<li class="category '+l+'">Last Searched Keywords</li>'+j:h=j}else for(var o=0;o<e.categoryOrder.length;o++)if(b.hasOwnProperty(e.categoryOrder[o])){for(var p=b[e.categoryOrder[o]].length>parseInt(e.searchLimit[e.categoryOrder[o]].limit)?parseInt(e.searchLimit[e.categoryOrder[o]].limit):b[e.categoryOrder[o]].length,q=0;p>q;q++)k=g.inpElm.val().replace(/\s,/g,",").replace(/,\s/g,",").toLowerCase(),(-1==k.indexOf(",")||-1==$.inArray(b[e.categoryOrder[o]][q].displayTextEn.toLowerCase(),k.split(",")))&&(j+=z.call(g,b[e.categoryOrder[o]][q],a));h=j?e.grouping?'<li class="category '+e.categoryOrder[o]+'">'+(e.searchLimit[e.categoryOrder[o]].title?e.searchLimit[e.categoryOrder[o]].title:e.categoryOrder[o])+"</li>"+j:j:!c&&e.showTitleForSingleBucket?'<li class="category '+e.categoryOrder[o]+'">Last Searched Keywords</li>'+j:j}return $.isEmptyObject(b)||("resultCorrections"==c?h='<li class="category">'+e.relatedCorrectionText+"</li>"+h:"resultConcepts"==c&&(h='<li class="category">'+e.relatedConceptText+"</li>"+h)),h},C=function(){var a=this,b=a.inpElm;e.placeholderTxt=b?b[0].getAttribute("placeholder"):"",b.val(e.placeholderTxt)},D=function(){var a=this;a.inpElm.val("").css({color:"#444"})},E=function(a,b){this.showSugt({val:b,data:a.resultList,relConcpt:"autoComplete"})},F=function(a,b){var c,d="",b=b||0;c=a?e.relatedConceptCategory:e.category;for(var f in c)!a&&e.searchLimit[f]&&e.searchLimit[f].startSearchAfter?b>=e.searchLimit[f].startSearchAfter&&(d+=f+","):d+=f+",";return d.replace(/,$/g,"")},G=function(){return $.isEmptyObject(e.qParams)?"":"&"+$.param(e.qParams)},H=function(a,b,c){var d=this,f="",g=e.appId?"&appId="+e.appId:"",h=e.sourceId?"&sourceId="+e.sourceId:"",i=new RegExp("[^a-zA-Z0-9,\\s"+e.whiteListSpecialChar+"]","g");if(d.Qry=b.replace(i,""),d.Qry){if(Q()&&d.prefetchObj)var j=P.getItem(e.storageKey.versionKey),f=j?"&version="+j.suggester_v:"";return a+"query="+encodeURIComponent(d.Qry)+g+"&vertical="+e.vertical+"&category="+F.call(d,c,d.Qry.length)+"&limit="+e.maxSuggestions+h+f+G()}return!1},I=function(a,b,c){var d,e=0;if(a&&Q()&&(d=q.call(this,a,b)))for(var f in c)d[f]&&(e=1,this.cached=!0);return[e,d]},J=function(){var a=this;return function(b){var c,d,f;$(this);$(b.target).hasClass("Sarw")?(c=$(b.target).parents("li"),f=!0):($(b.target).hasClass("Sbtn")||$(b.target).is("strong"))&&(c=$(b.target).closest("li"),f=e.suggestOnClick?!1:!0),d=c.find(".Sbtn"),(!e.relatedConceptCategory||a.RCMaxCntr>=e.relatedConceptsLimit-1)&&(f=!1,K.call(a)),a.posIndex=t(c,a.dropCont),e.suggestOnClick&&K.call(a),setTimeout(function(){u.call(a,d,f)},50)}},K=function(){var a=this,b=a.id;w(a.curElm),a.dropCont.removeClass("slideDown"),a.curElm="",$("#"+b).find(".sWrap").removeClass("sOpen").addClass("sHide"),delete N[b],e.onHide&&e.onHide(),setTimeout(function(){a.enableRC_for_onfocus=!0},500)},R=function(){var a=this,b=a.id;e.width?a.wth=e.width:a.wth=$(document.getElementById(b)).outerWidth()+"px",a.dropCont.css({width:a.wth}).addClass("slideDown"),$("#"+b).find(".sWrap").removeClass("sHide").addClass("sOpen"),N[b]=a.dropCont,e.onShow&&e.onShow()},S=function(){var a=this;a.dropCont.on("mouseover",".Sbtn,.Sarw,strong",function(b){$(this).hasClass("Sbtn")?$(this).addClass("sAct"):$(this).is("strong")?$(this).parent().addClass("sAct"):$(this).addClass("sAct"),w(a.curElm),a.curElm=$(this)}).mouseout(function(b){a.curElm=void 0,w($(this))})},V=function(a){var b=a.target||a.srcElement;$(b).hasClass("inpWrap")&&$(this).find(".sugInp").focus()},W=function(){var a={},b=[];for(var c in this.rs_kWrds)b.push({displayTextEn:this.rs_kWrds[c]});return a.rs=b,a},X=function(a){var b=this,c=$.trim(b.inpElm.val());if(b.curOpenSugg=b.id,e.showDataOnFocus&&($.trim(b.inpElm.val())||(e.category=$.extend({},e.category,{rs:"rs"}),b.rs_kWrdsStr?this.showSugt({val:"",data:W.call(b)}):(g.call(b),b.rs_kWrdsStr&&this.showSugt({val:"",data:W.call(b)})))),e.multiSearch&&c&&c!=e.placeholderTxt){var d=void 0;d=e.appendCommaAtLast_onSelect?", ":" ",setTimeout(function(){b.inpElm.val(c.replace(/[,\s]*$/,d))},10),e.relatedConceptCategory&&b.enableRC_for_onfocus&&b.RCMaxCntr<e.relatedConceptsLimit-1&&b.get_RCdata(o(c))}else!$.support.placeholder&&e.placeholder&&e.placeholderTxt==c&&D.call(b)},Y=function(){var a=this.val();return a.charCodeAt(a.length-1)},Z=function(a,b){var c=this,d=(a.attr("id"),b.keyCode||b.which);(0==d||229==d)&&(d=Y.call(a));var f=c.inpElm,g=c.id,h=$.trim(f.val());if(c.queryChar=h,13==d&&"block"==c.dropCont.css("display"))if(c.curElm){c.posIndex=t(c.curElm,c.dropCont);var i;!e.relatedConceptCategory||c.RCMaxCntr>=e.relatedConceptsLimit-1?(i=!1,c.RCMaxCntr++):i=e.suggestOnClick&&c.curElm.find(".Sbtn").hasClass("sAct")?!1:!0,u.call(c,c.curElm.find(".Sbtn"),i),i||K.call(c)}else K.call(c);else if(27==d)K.call(c);else if(h||8!=d&&46!=d)if(d>=48&&90>d||d>=97&&122>=d||16==d||188==d||8==d){if(b.ctrlKey&&86===d&&(h=h.replace(/,$/,""),f.val(h)),h){var j=void 0;if(e.localSuggestions){var k="["+e.localSuggestions.delimiter.join("")+"](\\w)*$",l=new RegExp(k,"g");if(j=h.match(l))return void this.showSugt({val:j[0].substring(1,j[0].length),data:this.getLocalSuggestions(j[0],h),catagory:{tempCategory:"tempCategory"}})}if("server"==e.source)if(188==d&&-1!=h.lastIndexOf(",")&&e.multiSearch)e.relatedConceptCategory?c.get_RCdata(o(h)):K.call(c);else{var m=e.multiSearch?this.extractTextAfterLastDelimiter(h):h;if(m.length>e.startSearchAfter-1){var n=I.call(c,m,"ac",e.category);n[0]?e.bypassPrefetchAfter&&e.bypassPrefetchAfter<=parseInt(m.length)?c.getAutoCompletes(h,m):(c.dataType="autoconcepts",this.showSugt({val:m,data:n[1],relConcpt:"autoComplete"})):c.getAutoCompletes(m,m)}}else"local"==e.source&&c.returnDataArray({data:e.data,val:h})}$("#"+g).find(".sCross").show().click(function(){c.inpElm.val("").focus(),$(this).hide(),K.call(c),c.dropCont.find("ul").html("")})}else b.ctrlKey&&39==d||b.ctrlKey&&40==d?(c.curElm.find(".Sbtn").removeClass("sAct"),c.curElm.children(".Sarw").addClass("sAct")):b.ctrlKey&&37==d||b.ctrlKey&&38==d?(c.curElm.children(".Sarw").removeClass("sAct"),c.curElm.find(".Sbtn").addClass("sAct")):c.dropCont.find("li").length&&("none"==c.dropCont.css("display")&&40==d?R.call(c):38==d?(c.curElm?c.curElm=x.call(c,c.curElm,"prev"):c.curElm=y.call(c,g+" li:last-child",c.curElm),R.call(c)):40==d&&(c.curElm?c.curElm=x.call(c,c.curElm,"next"):c.curElm=y.call(c,g+" li:first-child",c.curElm)));else $("#"+g+" .sCross").hide(),K.call(c)},_=function(a){var b=this,c=a.which||a.keyCode;if(38==c)a.preventDefault();else if(13==c)"block"==b.dropCont.css("display")&&b.curElm&&a.preventDefault();else if(9==c){if(b.curElm){var d=b.curElm.html().replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&");b.inpElm.val(s.call(b,d))}r.call(b),K.call(b)}},aa=function(a){var b,c=this;if(L=e.url.trackingURL,c.id=e.id||a.attr("id"),c.enableRC_for_onfocus=!0,c.RCMaxCntr=0,c.inpElm=a.find(".sugInp"),e.placeholderTxt=c.inpElm.attr("placeholder"),O[c.id]={},O[c.id].Events=[],e.trackUserInteraction&&(b={trackParams:JSON.stringify({id:c.id?c.id:"",sourceId:e.sourceId?e.sourceId:"",platform:e.platform?e.platform:"",appId:e.appId?e.appId:"",trackingSrc:e.trackingSrc?e.trackingSrc:""})}),c.inpElm.attr($.extend({autocomplete:"off"},b)),e.maxlength=c.inpElm.attr("maxlength")||1e4,c.dropCont=$('<div class="sugCont '+e.scrollStyle+'" id="sugDrp_'+c.id+'">').append('<ul class="Sdrop"></ul>'),a.append(c.dropCont),!e.placeholder||$.support.placeholder||$.trim(c.inpElm.val())||C.call(this),c.inpElm.focus(function(){X.call(c)}).keyup(function(a){Z.call(c,$(this),a)}).keydown(function(a){c.curOpenSugg||(c.curOpenSugg=c.id),_.call(c,a)}),e.removeCommaAtLast_onBlur&&c.inpElm.blur(function(){this.value=this.value.replace(/[,\s]*$/,"")}),a.find(".sWrap").click(V),S.call(c),c.dropCont.on("click",".sugTouple",J.call(c)),j.call(c),e.trackUserInteraction&&Q()&&L){var d=P.getItem("sug_Tracking");d&&f.call(c,L+"?lgData="+JSON.stringify(d),function(){P.removeItem("sug_Tracking")})}},ba=function(a){this.node=a,aa.call(this,a),this.setTrackingObject=T};ba.prototype=function(){var a=function(a){return this.inpElm.val()},b=function(a){var b=this,c=b.getlastChar(a),d=I.call(b,c,"rc",e.relatedConceptCategory);if(d[0])K.call(b),b.dataType="relatedConcept",this.showSugt({val:c,data:d[1],relConcpt:"resultConcepts"}),b.RCMaxCntr++;else{var g=H.call(b,e.url.relatedConcept,c,!0);f.call(b,g,function(a){K.call(b);for(var d in a);this.showSugt({val:c,data:a[d],relConcpt:d})})}},c=function(a,b){var c=0,d=b.match(/[#@](\w)*$/g)[0].replace(/^[#@]/,"").toLowerCase(),f=new RegExp("^"+[d]+"|\\s"+[d]),g=e.localSuggestions.data(a[0]).filter(function(a,b){return c<e.maxSuggestions&&(!d||a.displayTextEn.toLowerCase().match(f))?!0:!1});return{tempCategory:g}},d=function(a){var b=a.data,c=a.val,d=this,e=(d.id,{}),f=c.toLowerCase(),g=new RegExp("^"+[f]+"|\\s"+[f]);for(var h in b[0]){var i=b[0][h].filter(function(a,b){return a.displayTextEn.toLowerCase().match(g)?!0:!1});e[h]=i}this.showSugt({val:c,data:e})},g=function(a){return a.replace(/^\s*|\s*$/g,"")},h=function(a){var b=$.trim(a).replace(/,*$/g,"").toLowerCase();return $.trim(b.substring(b.lastIndexOf(",")+1,b.length))},i=function(a){var b=",";return a=g(a).toLowerCase(),g(a.substring(a.lastIndexOf(b)+1,a.length))},j=function(a,b){var c=this;if(e.localSuggestions?a=b:e.multiSearch&&(a=c.getlastChar(a)),a){var d=H.call(c,e.url.autoComplete,a,!1);f.call(c,d,function(b){E.call(c,b,a)})}},k=function(a){var b=a.val,c=a.data,d=a.relConcpt,e=a.catagory,f=this;f.curElm=void 0;var g=B.call(f,f.getlastChar(b),c,d,e);g?(f.dropCont.find("ul").html(g),R.call(f)):K.call(f)};return{getValue:a,get_RCdata:b,sendTrackingData:U,getLocalSuggestions:c,returnDataArray:d,extractTextAfterLastDelimiter:i,getlastChar:h,getAutoCompletes:j,showSugt:k,trimSpace:g}}();var ca=$(e.trigger),da=ca.data("suggestor");return da||ca.each(function(a,b){var c=$(b);da=new ba(c),c.data("suggestor",da)}),da};a.suggestor=V,Object.defineProperty(a,"__esModule",{value:!0})});